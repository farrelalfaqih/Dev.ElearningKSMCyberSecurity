<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact | E-Learning Cyber Security</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;700;800&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            darkbg: '#000000',
            darknav: '#1E1E1E',
            darkcard: '#222A34',
            primary: '#309255',
            muted: '#909090',
            borderlight: '#D9D9D9',
            softgreen: '#EEFBF3',
          },
          fontFamily: {
            lexend: ['Lexend', 'system-ui', 'sans-serif'],
            mont: ['Montserrat', 'system-ui', 'sans-serif'],
          }
        }
      }
    }
  </script>

  <style>
    body {
      font-family: 'Montserrat', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
  </style>
</head>
<body class="bg-white text-gray-800">

  <div class="min-h-screen flex flex-col">

    <!-- NAVBAR -->
    <header class="bg-softgreen/60">
      <div class="max-w-7xl mx-auto px-4 lg:px-8 py-4">
        <div class="flex items-center justify-between gap-6">
          <!-- Logo + Brand -->
          <div class="flex items-center gap-4">
            <div class="w-16 h-16 rounded-2xl border border-borderlight flex items-center justify-center bg-white">
              <img src="image/LogoHeader.png" alt="Logo" class="w-14 h-14 object-cover rounded-xl">
            </div>
            <div class="font-lexend leading-tight">
              <div class="text-gray-800 text-3xl md:text-4xl font-bold">Cyber</div>
              <div class="text-primary text-3xl md:text-4xl font-medium">Security</div>
            </div>
          </div>

          <!-- NAVIGATION (Contact aktif) -->
          <nav class="hidden md:flex items-center gap-4 font-mont text-xl">
            <a href="index.html"
               class="px-4 py-2 rounded-xl transition-all duration-200
                      text-black
                      hover:bg-softgreen hover:text-primary hover:font-semibold">
              Home
            </a>

            <a href="course.html"
               class="px-4 py-2 rounded-xl transition-all duration-200
                      text-black
                      hover:bg-softgreen hover:text-primary hover:font-semibold">
              Course
            </a>

            <a href="blog.html"
               class="px-4 py-2 rounded-xl transition-all duration-200
                      text-black
                      hover:bg-softgreen hover:text-primary hover:font-semibold">
              Blog
            </a>

            <!-- Contact aktif: pill hijau -->
            <a href="contact.html"
               class="px-4 py-2 rounded-xl transition-all duration-200
                      bg-primary text-white font-semibold hover:bg-primary/90">
              Contact
            </a>
          </nav>

          <!-- LOGIN / PROFILE (dynamic dari Supabase) -->
          <div id="auth-btn-container" class="flex items-center"></div>
        </div>
      </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="flex-1 bg-white">
      <section class="max-w-7xl mx-auto px-4 lg:px-8 py-12">
        <!-- Title -->
        <div class="mb-10 text-center">
          <h1 class="font-lexend text-3xl sm:text-4xl md:text-5xl text-gray-900 mb-4">
            Hubungi <span class="text-primary font-bold">KSM Cyber Security</span>
          </h1>
          <p class="font-mont text-base sm:text-lg text-muted max-w-2xl mx-auto">
            Punya pertanyaan seputar e-learning, keanggotaan, atau kerjasama?
            Kirim pesan melalui form di samping, tim kami akan segera menghubungi kamu.
          </p>
        </div>

        <div class="grid lg:grid-cols-2 gap-10 items-start">
          <!-- LEFT: Info + FAQ + Support -->
          <div class="space-y-8">
            <!-- Kontak langsung -->
            <div class="bg-softgreen rounded-3xl p-6 border border-primary/40">
              <h2 class="font-lexend text-2xl md:text-3xl text-gray-900 mb-3">
                Informasi Kontak
              </h2>
              <p class="font-mont text-base text-gray-700 mb-4">
                Kamu juga bisa menghubungi kami melalui:
              </p>
              <ul class="space-y-2 font-mont text-sm md:text-base text-gray-800">
                <li><span class="font-semibold">Email:</span> ksm.cyber@upnvj.ac.id (contoh)</li>
                <li><span class="font-semibold">Instagram:</span> @ksmcybersecurity</li>
                <li><span class="font-semibold">Lokasi:</span> Fakultas Ilmu Komputer, UPN Veteran Jakarta</li>
              </ul>
            </div>

            <!-- FAQ -->
            <div class="bg-white rounded-3xl p-6 border border-borderlight">
              <h2 class="font-lexend text-2xl md:text-3xl text-gray-900 mb-4">
                FAQ (Pertanyaan Umum)
              </h2>
              <div class="space-y-4 font-mont text-sm md:text-base text-gray-800">
                <div>
                  <p class="font-semibold">1. Apakah e-learning ini gratis?</p>
                  <p class="text-muted">
                    Sebagian materi dasar bersifat gratis. Beberapa track lanjutan dapat
                    menggunakan sistem langganan / membership internal KSM.
                  </p>
                </div>
                <div>
                  <p class="font-semibold">2. Apakah saya harus menjadi member KSM untuk mengakses materi?</p>
                  <p class="text-muted">
                    Tidak semuanya. Materi fundamental dapat diakses publik, sedangkan
                    materi khusus seperti lab attack/defence biasanya khusus member aktif.
                  </p>
                </div>
                <div>
                  <p class="font-semibold">3. Berapa lama admin membalas pesan?</p>
                  <p class="text-muted">
                    Biasanya 1–3 hari kerja, tergantung antrian dan jadwal kepengurusan.
                  </p>
                </div>
              </div>
            </div>

            <!-- Support Team -->
            <div class="bg-softgreen rounded-3xl p-6 border border-primary/40">
              <h2 class="font-lexend text-2xl md:text-3xl text-gray-900 mb-3">
                Tim Support
              </h2>
              <p class="font-mont text-sm md:text-base text-gray-800 mb-4">
                Pesanmu akan diteruskan ke divisi yang tepat:
              </p>
              <ul class="space-y-2 font-mont text-sm md:text-base text-gray-800">
                <li>• <span class="font-semibold">Divisi Ristek:</span> pertanyaan materi & teknis e-learning.</li>
                <li>• <span class="font-semibold">Divisi PSDM:</span> keanggotaan & pengembangan member.</li>
                <li>• <span class="font-semibold">Divisi Humas:</span> kerjasama, event, dan publikasi.</li>
              </ul>
            </div>
          </div>

          <!-- RIGHT: Contact Form (Web3Forms) -->
          <div class="bg-softgreen rounded-3xl p-6 md:p-8 border border-primary/40">
            <h2 class="font-lexend text-2xl md:text-3xl text-gray-900 mb-4">
              Kirim Pesan
            </h2>
            <p class="font-mont text-sm md:text-base text-gray-700 mb-6">
              Isi formulir di bawah ini. Pastikan email yang kamu gunakan aktif agar
              kami bisa membalas pesanmu.
            </p>

            <!-- STATUS MESSAGE -->
            <div id="form-status"
                 class="hidden mb-4 px-4 py-3 rounded-2xl text-sm font-mont">
            </div>

            <form id="contact-form" class="space-y-5">
              <!-- Web3Forms access key -->
              <input type="hidden" name="access_key" value="57d097bd-9281-477b-aa82-eb4ed2f94c4a" />
              <input type="hidden" name="subject" value="Pesan baru dari Contact Form E-Learning Cyber Security" />
              <input type="hidden" name="from_name" value="E-Learning Cyber Security - Contact Page" />

              <!-- Nama -->
              <div>
                <label for="name" class="block font-mont text-sm font-semibold text-gray-800 mb-1">
                  Nama Lengkap
                </label>
                <input
                  id="name"
                  name="name"
                  type="text"
                  required
                  class="w-full rounded-2xl border border-borderlight px-4 py-3 font-mont text-sm md:text-base
                         focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"
                  placeholder="Masukkan nama lengkap kamu"
                />
              </div>

              <!-- Email -->
              <div>
                <label for="email" class="block font-mont text-sm font-semibold text-gray-800 mb-1">
                  Email
                </label>
                <input
                  id="email"
                  name="email"
                  type="email"
                  required
                  class="w-full rounded-2xl border border-borderlight px-4 py-3 font-mont text-sm md:text-base
                         focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"
                  placeholder="contoh: nama@email.com"
                />
              </div>

              <!-- Kategori -->
              <div>
                <label for="topic" class="block font-mont text-sm font-semibold text-gray-800 mb-1">
                  Topik Pesan
                </label>
                <select
                  id="topic"
                  name="topic"
                  class="w-full rounded-2xl border border-borderlight px-4 py-3 font-mont text-sm md:text-base
                         focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary bg-white">
                  <option value="umum">Pertanyaan Umum</option>
                  <option value="elearning">E-Learning & Materi</option>
                  <option value="keanggotaan">Keanggotaan KSM</option>
                  <option value="kerjasama">Kerjasama / Event</option>
                </select>
              </div>

              <!-- Pesan -->
              <div>
                <label for="message" class="block font-mont text-sm font-semibold text-gray-800 mb-1">
                  Pesan
                </label>
                <textarea
                  id="message"
                  name="message"
                  rows="5"
                  required
                  class="w-full rounded-2xl border border-borderlight px-4 py-3 font-mont text-sm md:text-base
                         focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary resize-none"
                  placeholder="Tulis pesan kamu di sini..."></textarea>
              </div>

              <!-- Tombol Submit -->
              <div class="pt-2">
                <button
                  type="submit"
                  id="submit-btn"
                  class="inline-flex items-center justify-center px-8 py-3 rounded-2xl
                         bg-primary text-white font-mont text-base md:text-lg font-bold shadow-md
                         transition-all duration-200 hover:bg-white hover:text-primary hover:border hover:border-primary">
                  Kirim Pesan
                </button>
              </div>

              <!-- Optional: info kecil -->
              <p class="font-mont text-xs text-muted mt-2">
                Dengan mengirim pesan, kamu menyetujui bahwa data ini akan digunakan untuk keperluan
                tindak lanjut pertanyaanmu oleh pengurus KSM Cyber Security.
              </p>
            </form>
          </div>
        </div>
      </section>
    </main>

    <!-- FOOTER -->
    <footer class="bg-primary mt-auto">
      <div class="max-w-7xl mx-auto px-4 lg:px-8 py-6">
        <p class="text-center text-white font-mont text-sm md:text-base">
          © 2025 KSM Cyber Security — E-Learning Platform.
        </p>
      </div>
    </footer>
  </div>

  <!-- SCRIPT: Supabase auth + Web3Forms submit -->
  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

    // --- Supabase setup ---
    const supabaseUrl = "https://zvdyxgmfxgmupezpaaxk.supabase.co";
    const supabaseKey =
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp2ZHl4Z21meGdtdXBlenBhYXhrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2NjM3NzksImV4cCI6MjA4MDIzOTc3OX0.I2JRd_EPXhOhvrV3IPijGKuL8jdkF55dGsPGSMN5wEg";

    const supabase = createClient(supabaseUrl, supabaseKey);
    const authContainer = document.getElementById("auth-btn-container");

    async function renderAuthButton() {
      try {
        const { data, error } = await supabase.auth.getSession();
        if (error) {
          console.error("Supabase session error:", error);
        }
        const session = data?.session;

        if (!session) {
          // Belum login → tampilkan LOGIN dengan hover
          authContainer.innerHTML = `
            <a href="login.html"
               class="inline-flex items-center justify-center px-6 py-3 rounded-2xl
                      bg-primary text-white font-mont text-xl font-bold shadow-md
                      transition-all duration-200 hover:bg-white hover:text-primary hover:border hover:border-primary">
              LOGIN
            </a>
          `;
          return;
        }

        // Sudah login → tampilkan Profile
        const user = session.user;
        const avatar =
          user.user_metadata?.avatar_url ||
          "https://ui-avatars.com/api/?name=" +
          encodeURIComponent(user.email || "User") +
          "&background=309255&color=fff";

        authContainer.innerHTML = `
          <a href="profile.html"
             class="flex items-center gap-3 px-3 py-1 rounded-2xl
                    hover:bg-softgreen transition-all duration-200">
            <img src="${avatar}"
                 alt="Profile Avatar"
                 class="w-10 h-10 rounded-full border border-primary object-cover">
            <span class="font-mont text-lg text-black font-semibold">Profile</span>
          </a>
        `;
      } catch (err) {
        console.error("Error renderAuthButton:", err);
      }
    }

    renderAuthButton();

    // --- Web3Forms submit (konfirmasi di halaman sendiri) ---
    const form = document.getElementById("contact-form");
    const statusBox = document.getElementById("form-status");
    const submitBtn = document.getElementById("submit-btn");

    if (form) {
      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        // Disable button sementara
        submitBtn.disabled = true;
        submitBtn.textContent = "Mengirim...";
        statusBox.classList.add("hidden");

        try {
          const formData = new FormData(form);
          const response = await fetch("https://api.web3forms.com/submit", {
            method: "POST",
            body: formData,
          });

          const result = await response.json();

          if (result.success) {
            statusBox.textContent = "Terima kasih! Pesan kamu sudah terkirim. Tim kami akan segera menindaklanjuti.";
            statusBox.className =
              "mb-4 px-4 py-3 rounded-2xl text-sm font-mont bg-green-100 text-green-800 border border-green-300";
            form.reset();
          } else {
            console.error(result);
            statusBox.textContent = "Terjadi kesalahan saat mengirim pesan. Silakan coba lagi beberapa saat lagi.";
            statusBox.className =
              "mb-4 px-4 py-3 rounded-2xl text-sm font-mont bg-red-100 text-red-800 border border-red-300";
          }
        } catch (error) {
          console.error("Web3Forms error:", error);
          statusBox.textContent = "Gagal terhubung ke server. Pastikan koneksi internet kamu stabil lalu coba lagi.";
          statusBox.className =
            "mb-4 px-4 py-3 rounded-2xl text-sm font-mont bg-red-100 text-red-800 border border-red-300";
        } finally {
          statusBox.classList.remove("hidden");
          submitBtn.disabled = false;
          submitBtn.textContent = "Kirim Pesan";
        }
      });
    }
  </script>
</body>
</html>
